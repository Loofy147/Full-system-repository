# ═══════════════════════════════════════════════════════════════════════════════
# SYSTÈME MULTI-ECOSYSTEM CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════
# This configuration integrates all Loofy147 repositories into a cohesive system

version: "2.0"
name: "systeme-multi-ecosystem"
description: "Production-ready multi-ecosystem AI orchestration platform"

# ═══════════════════════════════════════════════════════════════════════════════
# ORCHESTRATION LAYER (MCP/A2A)
# ═══════════════════════════════════════════════════════════════════════════════
orchestration:
  mcp:
    version: "1.0"
    transport: "stdio"
    servers:
      - name: "systeme-core"
        command: "python"
        args: ["-m", "systeme.mcp_server"]
        env:
          ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"
          LOG_LEVEL: "INFO"
    
  a2a:
    protocol_version: "1.0"
    discovery:
      method: "registry"
      registry_url: "http://localhost:8500/agents"
    communication:
      method: "json-rpc"
      timeout_ms: 30000
      retry:
        max_attempts: 3
        backoff_multiplier: 2.0
        initial_delay_ms: 1000

# ═══════════════════════════════════════════════════════════════════════════════
# ECOSYSTEM DEFINITIONS
# ═══════════════════════════════════════════════════════════════════════════════
ecosystems:
  # ─────────────────────────────────────────────────────────────────────────────
  # HIERARCHICAL REINFORCEMENT LEARNING
  # Repository: Loofy147/Herarchecal-agent
  # ─────────────────────────────────────────────────────────────────────────────
  hrl:
    name: "Hierarchical RL Core"
    repository: "Loofy147/Herarchecal-agent"
    status: "active"
    priority: 1
    
    manager:
      learning_rate: 0.1
      discount_factor: 0.95
      exploration_rate: 0.2
      her_enabled: true  # Hindsight Experience Replay
      per_enabled: true  # Prioritized Experience Replay
      
    worker:
      uvfa:
        feature_dim: 64
        hidden_layers: [128, 64]
        activation: "relu"
      action_space: ["process", "transform", "validate", "store", "emit"]
    
    improvements_required:
      - id: "HRL-001"
        description: "Replace linear UVFA with neural network"
        priority: "critical"
        effort: "medium"
      - id: "HRL-002"
        description: "Upgrade Manager Q-table to DQN"
        priority: "high"
        effort: "high"

  # ─────────────────────────────────────────────────────────────────────────────
  # AGENTIC CONTEXT ENGINEERING
  # Repository: Loofy147/ACE-Agentic-Context-Engineering
  # ─────────────────────────────────────────────────────────────────────────────
  ace:
    name: "ACE Context Engine"
    repository: "Loofy147/ACE-Agentic-Context-Engineering"
    status: "active"
    priority: 1
    
    playbook:
      storage: "sqlite"
      db_path: "./data/ace_playbook.db"
      sections:
        - "defaults"
        - "strategies"
        - "pitfalls"
        - "tools"
      
    roles:
      generator:
        model: "claude-sonnet-4-20250514"
        max_tokens: 4096
      reflector:
        model: "claude-sonnet-4-20250514"
        max_tokens: 2048
      curator:
        dedup_threshold: 0.85
        prune_threshold: 0.3
        grow_and_refine: true
    
    retrieval:
      method: "hybrid"
      embedding_model: "text-embedding-3-small"
      similarity_weight: 0.6
      helpful_weight: 0.3
      freshness_weight: 0.1

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTONOMOUS GOVERNANCE
  # Repository: Loofy147/outonomos-system
  # ─────────────────────────────────────────────────────────────────────────────
  governance:
    name: "Autonomous Governance Gateway"
    repository: "Loofy147/outonomos-system"
    status: "pending_implementation"
    priority: 2
    
    policies:
      - name: "rate_limiter"
        type: "rate_limit"
        config:
          max_requests_per_minute: 100
          burst_limit: 20
          
      - name: "permission_enforcer"
        type: "permission"
        config:
          required_permissions: ["execute", "read"]
          admin_bypass: false
          
      - name: "resource_guard"
        type: "resource_limit"
        config:
          max_memory_mb: 4096
          max_cpu_percent: 80
          max_api_cost_usd: 10.0
    
    security:
      scanner:
        enabled: true
        signatures_path: "./config/security_signatures.json"
      audit:
        enabled: true
        retention_days: 90
        
    hitl:
      enabled: true
      timeout_seconds: 3600
      escalation_channels:
        - type: "slack"
          webhook: "${SLACK_WEBHOOK_URL}"
        - type: "email"
          recipients: ["admin@example.com"]

  # ─────────────────────────────────────────────────────────────────────────────
  # MULTI-AGENT COMMUNICATION
  # Repository: Loofy147/Agents-box-comunication
  # ─────────────────────────────────────────────────────────────────────────────
  communication:
    name: "Emergent Communication Protocol"
    repository: "Loofy147/Agents-box-comunication"
    status: "active"
    priority: 2
    
    protocol:
      learning:
        reward_correct: 1.0
        penalty_wrong: -0.5
        cost_per_token: 0.001
        latency_penalty: 0.0001
      
      memory:
        max_entries: 10000
        exploit_probability: 0.8
        
      signal:
        max_length: 50
        encoding: "utf-8"
    
    llm:
      provider: "anthropic"
      model: "claude-sonnet-4-20250514"
      fallback_model: "claude-3-5-sonnet-20240620"

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTOMATION PIPELINE
  # Repository: Loofy147/Intellectual-intelligence.-
  # ─────────────────────────────────────────────────────────────────────────────
  automation:
    name: "Intelligent Automation Pipeline"
    repository: "Loofy147/Intellectual-intelligence.-"
    status: "active"
    priority: 3
    
    prospecting:
      api_endpoint: "https://api.companyenrich.com/v1"
      api_key: "${PROSPECTOR_API_KEY}"
      rate_limit_rpm: 60
      
    pipeline:
      output_dir: "./experiments"
      pipeline_file: "00_RECRUITMENT_PIPELINE.md"
      
    improvements_required:
      - id: "AUTO-001"
        description: "Remove interactive prompts for full autonomy"
        priority: "high"
      - id: "AUTO-002"
        description: "Make file paths configurable"
        priority: "medium"

  # ─────────────────────────────────────────────────────────────────────────────
  # INFRASTRUCTURE
  # Repository: Loofy147/-Rainer-
  # ─────────────────────────────────────────────────────────────────────────────
  infrastructure:
    name: "Microservices Platform"
    repository: "Loofy147/-Rainer-"
    status: "active"
    priority: 2
    
    kubernetes:
      namespace: "systeme"
      replicas:
        min: 2
        max: 10
      resources:
        requests:
          cpu: "500m"
          memory: "512Mi"
        limits:
          cpu: "2000m"
          memory: "2Gi"
          
    services:
      - name: "project-service"
        port: 3001
      - name: "workspace-service"
        port: 3002
        
    monitoring:
      prometheus:
        enabled: true
        scrape_interval: "15s"
      grafana:
        enabled: true
        dashboards:
          - "systeme-overview"
          - "agent-metrics"
          - "red-team-results"

  # ─────────────────────────────────────────────────────────────────────────────
  # FINANCIAL LEAK DETECTION
  # Repository: Loofy147/Leak-detecteur
  # ─────────────────────────────────────────────────────────────────────────────
  financial:
    name: "Financial Leak Detector"
    repository: "Loofy147/Leak-detecteur"
    status: "active"
    priority: 3
    
    analysis:
      leak_types:
        - "zombie"
        - "duplicate"
        - "free_alternative"
      confidence_threshold: 0.75
      
    integrations:
      plaid:
        enabled: true
        env: "sandbox"
      stripe:
        enabled: true
      supabase:
        enabled: true
        
    resilience:
      circuit_breaker:
        failure_threshold: 5
        reset_timeout_seconds: 30
      fallback:
        enabled: true
        strategies:
          - "cache"
          - "default_response"

  # ─────────────────────────────────────────────────────────────────────────────
  # CRYPTO PORTFOLIO MANAGER
  # Repository: Loofy147/-AI-Driven-Crypto-Portfolio-Manager-
  # ─────────────────────────────────────────────────────────────────────────────
  crypto:
    name: "AI Crypto Portfolio Manager"
    repository: "Loofy147/-AI-Driven-Crypto-Portfolio-Manager-"
    status: "active"
    priority: 3
    
    layers:
      intelligence:
        knowledge_graph: true
        ml_strategy: true
        signal_generation: true
        
      orchestration:
        enabled: true
        
      execution:
        risk_management: true
        position_sizing: true
        
      monitoring:
        adaptive_learning: true
        anomaly_detection: true
        
    risk:
      max_position_pct: 5.0
      max_drawdown_pct: 10.0
      stop_loss_pct: 2.0

  # ─────────────────────────────────────────────────────────────────────────────
  # AI DEVELOPMENT PLATFORM
  # Repository: Loofy147/Ai-hichem
  # ─────────────────────────────────────────────────────────────────────────────
  ai_platform:
    name: "Modular AI Platform"
    repository: "Loofy147/Ai-hichem"
    status: "active"
    priority: 2
    
    agents:
      - "cost_optimizer"
      - "explainability"
      - "security_hardener"
      
    inference:
      local_model: "Llama-2-13B-GGUF.gguf"
      fallback_api: "anthropic"
      
    cache:
      backend: "redis"
      ttl_seconds: 3600

# ═══════════════════════════════════════════════════════════════════════════════
# RED TEAM CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════
red_team:
  enabled: true
  
  schedule:
    continuous: false
    cron: "0 2 * * *"  # Daily at 2 AM
    
  campaign:
    parallel_attacks: 3
    delay_between_attacks_ms: 100
    timeout_per_attack_ms: 10000
    
  reporting:
    output_dir: "./reports/red_team"
    formats: ["json", "markdown", "html"]
    notify_on_critical: true
    
  attack_categories:
    - name: "state_fuzzing"
      enabled: true
      targets: ["hrl", "ace"]
      
    - name: "injection"
      enabled: true
      targets: ["ace", "communication"]
      
    - name: "resource_exhaustion"
      enabled: true
      targets: ["all"]
      
    - name: "protocol_attacks"
      enabled: true
      targets: ["communication", "a2a"]
      
    - name: "policy_bypass"
      enabled: true
      targets: ["governance"]

# ═══════════════════════════════════════════════════════════════════════════════
# OBSERVABILITY
# ═══════════════════════════════════════════════════════════════════════════════
observability:
  logging:
    level: "INFO"
    format: "json"
    outputs:
      - type: "stdout"
      - type: "file"
        path: "./logs/systeme.log"
        rotation: "daily"
        retention: 30
        
  metrics:
    enabled: true
    port: 9090
    path: "/metrics"
    labels:
      environment: "${ENVIRONMENT:development}"
      
  tracing:
    enabled: true
    exporter: "otlp"
    endpoint: "${OTEL_ENDPOINT:http://localhost:4317}"
    sampling_rate: 0.1

# ═══════════════════════════════════════════════════════════════════════════════
# DEPLOYMENT
# ═══════════════════════════════════════════════════════════════════════════════
deployment:
  strategy: "kubernetes"
  
  helm:
    chart: "./charts/systeme"
    values:
      - "./values/base.yaml"
      - "./values/${ENVIRONMENT}.yaml"
      
  terraform:
    enabled: true
    modules:
      - "networking"
      - "compute"
      - "storage"
      - "monitoring"
